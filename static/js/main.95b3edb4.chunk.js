(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[0],{16:function(e,t,n){e.exports={post:"Post_post__k-M1c",header:"Post_header__3AX5r",user:"Post_user__2QsRD",content:"Post_content__37Op3",imgContainer:"Post_imgContainer__2pU2y",actions:"Post_actions__3NQsO",activity:"Post_activity__3NN-q",likes:"Post_likes__49vLf",time:"Post_time__M-QSi",comments:"Post_comments__2tLLM",addComment:"Post_addComment__3uswk"}},17:function(e,t,n){e.exports={header:"Profile_header__1714E",photo:"Profile_photo__Wnbjm",id:"Profile_id__2_pIX",user:"Profile_user__2VT9G",name:"Profile_name__2whgl",activity:"Profile_activity__iZABj",posts:"Profile_posts__u1_2F",followBtn:"Profile_followBtn__3y941",unfollowBtn:"Profile_unfollowBtn__1qmb7"}},19:function(e,t,n){e.exports={photo:"NewPost_photo__2oIUI",dropArea:"NewPost_dropArea__2L5wS",dragging:"NewPost_dragging__2FG7i",message:"NewPost_message__3pSJ4",image:"NewPost_image__3OeO2",desc:"NewPost_desc__3MQNB",actions:"NewPost_actions__mzfm8",error:"NewPost_error__2Y1jN"}},22:function(e,t,n){e.exports={navbar:"Navbar_navbar__2wlKY",navItem:"Navbar_navItem__2NzOj"}},25:function(e,t,n){e.exports={square:"PostThumbnail_square__12VQt",content:"PostThumbnail_content__OFWk7",image:"PostThumbnail_image__2kuQY"}},29:function(e,t,n){e.exports={container:"App_container__3CZYa",content:"App_content__2-hcV"}},37:function(e,t,n){e.exports={header:"Header_header__28L8Y"}},47:function(e,t,n){},48:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var s=n(3),c=n.n(s),a=n(36),r=n.n(a),o=(n(47),n(48),n(29)),i=n.n(o),l=n(37),d=n.n(l),j=n(2);var u=function(){return Object(j.jsxs)("header",{className:d.a.header,children:[Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fcamera.svg?v=1614382899995",alt:"camera"})})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Flogo.png?v=1614382900226",alt:"logo"})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fmessage.svg?v=1614382900322",alt:"message"})})})]})},b=n(12),h=n(16),f=n.n(h),m=function(e){var t=Math.floor((new Date-new Date(e))/1e3),n=Math.floor(t/31556926);return n>=1?n+" years":(n=Math.floor(t/2592e3))>=1?n+" months":(n=Math.floor(t/86400))>=1?n+" days":(n=Math.floor(t/3600))>=1?n+" hours":(n=Math.floor(t/60))>=1?n+" minutes":Math.floor(t)+" seconds"};function p(e){return e.startsWith("/")?"/Social"+e:e}var O=n(11);var v=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!1),o=Object(b.a)(r,2),i=o[0],l=o[1];return Object(j.jsxs)("article",{className:f.a.post,children:[Object(j.jsx)("header",{className:f.a.header,children:Object(j.jsxs)("button",{className:f.a.user,to:"/profile/".concat(e.user.id),children:[Object(j.jsx)("img",{src:p(e.user.photo),alt:"User Profile"}),Object(j.jsxs)("span",{children:[Object(j.jsx)(O.b,{to:"/profile/".concat(e.user.id),children:e.user.id},"/profile/".concat(e.user.id))," "]})]})}),Object(j.jsx)("section",{className:f.a.content,children:Object(j.jsx)("div",{className:f.a.imgContainer,children:Object(j.jsx)("img",{src:p(e.post.photo),alt:"Post"})})}),Object(j.jsxs)("section",{className:f.a.actions,children:[Object(j.jsx)("button",{children:e.likes.self?Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Funlike.svg?v=1614382900439",alt:"Unlike Action",onClick:function(){e.onUnlike(e.post.id)}}):Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Flike.svg?v=1614382900207",alt:"Like Action",onClick:function(){e.onLike(e.post.id)}})}),Object(j.jsx)("button",{onClick:function(e){return l(!i)},children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fcomment.svg?v=1614382900046",alt:"Comment Action"})})]}),Object(j.jsxs)("section",{className:f.a.activity,children:[Object(j.jsxs)("div",{className:f.a.likes,children:[e.likes.count," likes"]}),Object(j.jsxs)("div",{className:f.a.comments,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)(O.b,{to:"/profile/".concat(e.post.userId),children:e.post.userId},"/profile/".concat(e.post.userId))}),Object(j.jsx)("span",{children:e.post.desc})]}),e.comments.map((function(e,t){return Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)(O.b,{to:"/profile/".concat(e.userId),children:e.userId},"/profile/".concat(e.userId))}),Object(j.jsx)("span",{children:e.text})]},t)}))]}),Object(j.jsxs)("time",{className:f.a.time,children:[m(e.post.datetime).toUpperCase()," AGO"]}),i&&Object(j.jsxs)("form",{className:f.a.addComment,onSubmit:function(t){e.onComment(e.post.id,c),a(""),l(!1),t.preventDefault()},children:[Object(j.jsx)("input",{type:"text",placeholder:"Add a comment\u2026",value:c,onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("button",{type:"submit",children:"Post"})]})]})]})},g=n(8);n(54);var x=n(26);n(56);x.a.initializeApp({type:"service_account",project_id:"socialapp-d7767",private_key_id:"17279f21ab006b8a488c844dc0ab94d4ae53a91b",private_key:"-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQCqbYec2cK1+j4X\n5aHDT35n+8W+3tscHit9l1sJxlmsZd8fKxfBOvtXBjCNKyBGmWqFYMgnSod584/C\nFJyGnnHix8o7EztWMQ356tHCWa5mieNLV6btt9nERqtI0M9qbeA4/g/t172g2ZpA\nZaUie6jQZB4KfHb0sSSTitIlVMVB0sN8w5Zq9Fq8XhcJ7fhRrnZj6wlPYIlYVQNk\nVYCsD585s0fYD6q+UsaEG1CZPYJ/VVesZy5kvg5RHPSAG7kULL5aYLVwZt+bHX3U\nrGPBOIfl1YkH7xr2UNlNpvH1ii9PF/uSUtgrklwms5q/6A/pfP0GVgb9SkGvg1UO\nK11xCwcrAgMBAAECggEAEJjewRav5fr7Jbv2N0gRk7Iq6CivMUYljsiOVB2zSUfD\nz+GUIab10obGyaiuhFGX1GoVc/DH0BzjyM8rDdfLrX3ZeEv/gP2r/Rpc187WCM8F\nifvSRN+dCdv7/aO1igmDRumZxtw2GmkL+EODLnWD04TnLAxCUBgZlh4fKFrguZp9\nBU1Elj+GGxYuoQiDhHC+t8Vr0edPMgyGdNp5yNZHgpW3mRq/IYzd/EWmI3ZZ037g\nfLRVaOlmCAnY1mlmgWZDCD97q8U1WUPlB1whekrYn9Gm17V1Iza5GjU4pdwegIdh\nGwhCwr3AFh0YbYGnf4Ps7+JrVn4BokkbzFhyjgdgoQKBgQDot7lF12G9BscfNJYl\n5hiurXhl2661CBGrEwDvZfy+Vwp5GK5QjfNujanW10kQ8otdui7dBgLMopXPggTU\nT2+nm16zTiSdOQYN4u50zbQZvWMfV++WWKiF30Wbl5Usrbrqqb5qu91tefeIDhOR\nTZyKJcDm76+8KQPdaMEIDs01EQKBgQC7enZ/cfgHS99/66AiA9/98sulr2M4w12E\nW4IALkI/qLr72kEG6D10jlgHaS7+Xxn1NAI+d9Jc1SH2p36ELTI/kl7lB68CERJO\nABvJH4u/RnqRov197jgEPfQfJQkyvLlLll1nZJbGplKxna2FJ0xJz7+bXtPO2XUM\ncE/x1ioIewKBgQCUhXzG6BjGrOa0MbmJ4nnqMWffif7MJqQwDGbSYsKVL7PNaUUG\nwDGWYu774FYPbNwpK0PxZ36t3y3BS3eNkEzwKSadRMf1V4lXn3cUMJw6uTXjsRmF\nWHvlRIOGM43O/+mFDmQqdk9xKSAjQuiWGXRIbqPYPyxm575BtjNL0zaAIQKBgQC2\nbeg5A5Gyp+YH+CSOdO7VkhkQVKZcad7qGJFb06ergmjRAgQc0Ihcjtah/3w3EhuU\nOtOkLbyJkOvHtBysSb6Hlcq5Wsy1Wh9Rv1FKWGQH8HD8nnnEvLXNiuuuEr/smzBD\nmUGyhnMhQl9dbm2XEDJv8LQmYBQDSB9Zx0BDt36XWQKBgQCvMi6tsq3yfYlv2guC\n741CwLRaSXsjhGYT+CCDUIypOtOA9ovgwcgzPDkRMHtzIyfqQE8+U29SCounHPY7\nq61Lzhg1i/ZaGBfLu/fHLGfeAt6nrbskvbiHgsxIhGVrVid3kjlzgqEYzdumw4WE\nI0FAC8NH9/Xvi4XcLx7gp8eNrQ==\n-----END PRIVATE KEY-----\n",client_email:"firebase-adminsdk-9ysgc@socialapp-d7767.iam.gserviceaccount.com",client_id:"116977428593968136585",auth_uri:"https://accounts.google.com/o/oauth2/auth",token_uri:"https://oauth2.googleapis.com/token",auth_provider_x509_cert_url:"https://www.googleapis.com/oauth2/v1/certs",client_x509_cert_url:"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-9ysgc%40socialapp-d7767.iam.gserviceaccount.com"});var _=x.a.firestore();x.a.auth();var w=Object(s.createContext)(),N=function(e){var t=Object(s.useState)(null),n=Object(b.a)(t,2),c=(n[0],n[1],Object(s.useState)([])),a=Object(b.a)(c,2),r=(a[0],a[1]),o=Object(s.useState)([]),i=Object(b.a)(o,2),l=(i[0],i[1]),d=Object(s.useState)([]),u=Object(b.a)(d,2),h=(u[0],u[1]),f=Object(s.useState)([]),m=Object(b.a)(f,2),p=m[0],O=m[1],v=Object(s.useState)([]),g=Object(b.a)(v,2),x=(g[0],g[1]);return Object(s.useEffect)((function(){_.collection("users").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));r(t)})),_.collection("posts").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));l(t)})),_.collection("likes").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));h(t)})),_.collection("followers").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));O(t)})),_.collection("comments").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));x(t)}))}),[]),Object(j.jsx)(w.Provider,{value:function(e,t){O(p.filter((function(n){return!(n.userId===e&&n.followerId===t)}))),_.collection("followers").where("userId","==",e).where("followerId","==",t).get().then((function(e){return e.forEach((function(e){return e.ref.delete()}))}))},children:e.children})};var D=function(e){var t=Object(g.g)().postId,n=Object(s.useContext)(w),c=n.posts,a=n.users,r=n.comments,o=n.likes,i=n.currentUserId,l=n.addComment,d=n.addLike,u=n.removeLike;function b(e){return a.find((function(t){return t.id===e.userId}))}function h(e){return r.filter((function(t){return t.postId===e.id}))}function f(e){var t=o.filter((function(t){return t.postId===e.id}));return{self:t.some((function(e){return e.userId===i})),count:t.length}}return Object(j.jsx)("div",{children:c.sort((function(e,t){return new Date(t.datetime)-new Date(e.datetime)})).filter((function(e){return void 0===t||e.id===t})).map((function(e){return Object(j.jsx)(v,{user:b(e),post:e,comments:h(e),likes:f(e),onComment:l,onLike:d,onUnlike:u},e.id)}))})};var k=function(){return Object(j.jsx)("h2",{children:"Explore"})},P=n(19),I=n.n(P),C=n(39),y=n(40),E=n(21),A=n(42),B=n(41),G=function(e){Object(A.a)(n,e);var t=Object(B.a)(n);function n(e){var s;return Object(C.a)(this,n),(s=t.call(this,e)).handleDragEnter=s.handleDragEnter.bind(Object(E.a)(s)),s.handleDrop=s.handleDrop.bind(Object(E.a)(s)),s.handleDragOver=s.handleDragOver.bind(Object(E.a)(s)),s.handleDragLeave=s.handleDragLeave.bind(Object(E.a)(s)),s}return Object(y.a)(n,[{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDrop&&this.props.onDrop(e)}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.dragTargetSaved=e.target,this.props.onDragEnter&&this.props.onDragEnter(e)}},{key:"handleDragOver",value:function(e){!1!==e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),this.props.onDragOver&&this.props.onDragOver(e))}},{key:"handleDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDragLeave&&this.dragTargetSaved===e.target&&this.props.onDragLeave(e)}},{key:"render",value:function(){var e=c.a.Children.only(this.props.children);return c.a.cloneElement(e,{onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop})}}]),n}(s.PureComponent);var L=function(e){var t=Object(s.useContext)(w).addPost,n=Object(s.useState)(!1),c=Object(b.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),i=Object(b.a)(o,2),l=i[0],d=i[1],u=Object(s.useState)(null),h=Object(b.a)(u,2),f=h[0],m=h[1],p=Object(s.useState)(""),O=Object(b.a)(p,2),v=O[0],x=O[1],_=Object(g.f)();return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:I.a.photo,children:[f?Object(j.jsx)("img",{src:f,alt:"New Post"}):Object(j.jsx)("div",{className:I.a.message,children:"Drop your image"}),Object(j.jsx)(G,{onDragEnter:function(e){r(!0)},onDragLeave:function(e){r(!1)},onDrop:function(e){if(!1!==e.dataTransfer.types.includes("Files")){if(e.dataTransfer.files.length>=1){var t=e.dataTransfer.files[0];if(t.size>1e6)return;if(t.type.match(/image.*/)){var n=new FileReader;n.onloadend=function(e){m(e.target.result)},n.readAsDataURL(t)}}r(!1)}},children:Object(j.jsx)("div",{className:[I.a.dropArea,a?I.a.dragging:null].join(" ")})})]}),Object(j.jsx)("div",{className:I.a.desc,children:Object(j.jsx)("textarea",{placeholder:"Describe...",rows:"2",value:l,onChange:function(e){d(e.target.desc)}})}),Object(j.jsx)("div",{className:I.a.error,children:v}),Object(j.jsxs)("div",{className:I.a.actions,children:[Object(j.jsx)("button",{onClick:function(){e.onPostCancel(),_.goBack()},children:"Cancel"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),null!==f?(t(f,l),x(""),_.push("/")):x("You need to add a photo!")},children:"Share"})]})]})};var S=function(){return Object(j.jsx)("h2",{children:"Activity"})},Q=n(17),U=n.n(Q),Y=n(25),M=n.n(Y);var F=function(e){return Object(j.jsx)("div",{className:M.a.square,children:Object(j.jsx)("div",{className:M.a.content,children:Object(j.jsx)("img",{className:M.a.image,src:p(e.post.photo),alt:"Post Thumbnail"})})})};var q=function(e){var t,n=Object(s.useContext)(w),c=n.posts,a=n.users,r=n.followers,o=n.currentUserId,i=n.addFollower,l=n.removeFollower,d=Object(g.g)(),u=void 0===d.userId?o:d.userId,b=a.find((function(e){return e.id===u})),h=c.filter((function(e){return e.userId===u})),f=r.filter((function(e){return e.userId===u})),m=r.filter((function(e){return e.followerId===u}));return t=void 0!==r.find((function(e){return e.userId===u&&e.followerId===o}))?Object(j.jsx)("button",{onClick:function(){l(u,o)},className:U.a.unfollowBtn,children:"Unfollow"}):Object(j.jsx)("button",{onClick:function(){i(u,o)},className:U.a.followBtn,children:"Follow"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("header",{className:U.a.header,children:[Object(j.jsx)("div",{className:U.a.photo,children:Object(j.jsx)("img",{src:b.photo,alt:"Profile"})}),Object(j.jsx)("div",{className:U.a.id,children:Object(j.jsx)("span",{children:u})}),Object(j.jsx)("div",{classname:U.a.button,children:t})]}),Object(j.jsxs)("div",{className:U.a.user,children:[Object(j.jsx)("div",{className:U.a.name,children:b.name}),Object(j.jsx)("div",{className:U.a.bio,children:b.bio})]}),Object(j.jsxs)("ul",{className:U.a.activity,children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:h.length}),Object(j.jsx)("br",{}),"posts"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:f.length}),Object(j.jsx)("br",{}),"followers"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:m.length}),Object(j.jsx)("br",{}),"following"]})]}),Object(j.jsx)("div",{className:U.a.posts,children:h.map((function(e){return Object(j.jsx)(O.b,{to:"/".concat(e.id),children:Object(j.jsx)(F,{post:e})},e.id)}))})]})},W=n(22),H=n.n(W);var V=function(e){return Object(j.jsxs)("nav",{className:H.a.navbar,children:[Object(j.jsx)("div",{className:H.a.navItem,children:Object(j.jsx)(O.b,{to:"/",children:Object(j.jsx)("img",{src:p("/assets/home.svg"),alt:"Home"})})}),Object(j.jsx)("div",{className:H.a.navItem,children:Object(j.jsx)(O.b,{to:"/explore",children:Object(j.jsx)("img",{src:p("/assets/explore.svg"),alt:"Explore"})})}),Object(j.jsx)("div",{className:H.a.navItem,children:Object(j.jsx)(O.b,{to:"/newpost",children:Object(j.jsx)("img",{src:p("/assets/newpost.svg"),alt:"NewPost"})})}),Object(j.jsx)("div",{className:H.a.navItem,children:Object(j.jsx)(O.b,{to:"/activity",children:Object(j.jsx)("img",{src:p("/assets/activity.svg"),alt:"Activity"})})}),Object(j.jsx)("div",{className:H.a.navItem,children:Object(j.jsx)(O.b,{to:"/profile",children:Object(j.jsx)("img",{src:p("/assets/profile.svg"),alt:"Profile"})})})]})};var Z=function(){return Object(j.jsx)(O.a,{basename:"/Social",children:Object(j.jsx)(N,{children:Object(j.jsx)("div",{className:i.a.container,children:Object(j.jsxs)("div",{className:i.a.content,children:[Object(j.jsx)(u,{}),Object(j.jsxs)(g.c,{children:[Object(j.jsx)(g.a,{path:"/explore",children:Object(j.jsx)(k,{})}),Object(j.jsx)(g.a,{path:"/activity",children:Object(j.jsx)(S,{})}),Object(j.jsx)(g.a,{path:"/newpost",children:Object(j.jsx)(L,{})}),Object(j.jsx)(g.a,{path:"/profile/:userId?",children:Object(j.jsx)(q,{})}),Object(j.jsx)(g.a,{path:"/:postId?",children:Object(j.jsx)(D,{})})]}),Object(j.jsx)(V,{})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(j.jsx)(Z,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.95b3edb4.chunk.js.map