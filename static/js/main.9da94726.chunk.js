(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[0],{16:function(e,t,n){e.exports={post:"Post_post__k-M1c",header:"Post_header__3AX5r",user:"Post_user__2QsRD",content:"Post_content__37Op3",imgContainer:"Post_imgContainer__2pU2y",actions:"Post_actions__3NQsO",activity:"Post_activity__3NN-q",likes:"Post_likes__49vLf",time:"Post_time__M-QSi",comments:"Post_comments__2tLLM",addComment:"Post_addComment__3uswk"}},17:function(e,t,n){e.exports={header:"Profile_header__1714E",photo:"Profile_photo__Wnbjm",id:"Profile_id__2_pIX",user:"Profile_user__2VT9G",name:"Profile_name__2whgl",activity:"Profile_activity__iZABj",posts:"Profile_posts__u1_2F",followBtn:"Profile_followBtn__3y941",unfollowBtn:"Profile_unfollowBtn__1qmb7"}},19:function(e,t,n){e.exports={photo:"NewPost_photo__2oIUI",dropArea:"NewPost_dropArea__2L5wS",dragging:"NewPost_dragging__2FG7i",message:"NewPost_message__3pSJ4",image:"NewPost_image__3OeO2",desc:"NewPost_desc__3MQNB",actions:"NewPost_actions__mzfm8",error:"NewPost_error__2Y1jN"}},22:function(e,t,n){e.exports={navbar:"Navbar_navbar__2wlKY",navItem:"Navbar_navItem__2NzOj"}},25:function(e,t,n){e.exports={square:"PostThumbnail_square__12VQt",content:"PostThumbnail_content__OFWk7",image:"PostThumbnail_image__2kuQY"}},29:function(e,t,n){e.exports={container:"App_container__3CZYa",content:"App_content__2-hcV"}},37:function(e,t,n){e.exports={header:"Header_header__28L8Y"}},47:function(e,t,n){},48:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var s=n(3),c=n.n(s),a=n(36),r=n.n(a),o=(n(47),n(48),n(29)),i=n.n(o),l=n(37),d=n.n(l),j=n(2);var u=function(){return Object(j.jsxs)("header",{className:d.a.header,children:[Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fcamera.svg?v=1614382899995",alt:"camera"})})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Flogo.png?v=1614382900226",alt:"logo"})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fmessage.svg?v=1614382900322",alt:"message"})})})]})},b=n(12),h=n(16),f=n.n(h),O=function(e){var t=Math.floor((new Date-new Date(e))/1e3),n=Math.floor(t/31556926);return n>=1?n+" years":(n=Math.floor(t/2592e3))>=1?n+" months":(n=Math.floor(t/86400))>=1?n+" days":(n=Math.floor(t/3600))>=1?n+" hours":(n=Math.floor(t/60))>=1?n+" minutes":Math.floor(t)+" seconds"};function p(e){return e.startsWith("/")?"/Social"+e:e}var m=n(11);var v=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!1),o=Object(b.a)(r,2),i=o[0],l=o[1];return Object(j.jsxs)("article",{className:f.a.post,children:[Object(j.jsx)("header",{className:f.a.header,children:Object(j.jsxs)("button",{className:f.a.user,to:"/profile/".concat(e.user.id),children:[Object(j.jsx)("img",{src:p(e.user.photo),alt:"User Profile"}),Object(j.jsxs)("span",{children:[Object(j.jsx)(m.b,{to:"/profile/".concat(e.user.id),children:e.user.id},"/profile/".concat(e.user.id))," "]})]})}),Object(j.jsx)("section",{className:f.a.content,children:Object(j.jsx)("div",{className:f.a.imgContainer,children:Object(j.jsx)("img",{src:p(e.post.photo),alt:"Post"})})}),Object(j.jsxs)("section",{className:f.a.actions,children:[Object(j.jsx)("button",{children:e.likes.self?Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Funlike.svg?v=1614382900439",alt:"Unlike Action",onClick:function(){e.onUnlike(e.post.id)}}):Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Flike.svg?v=1614382900207",alt:"Like Action",onClick:function(){e.onLike(e.post.id)}})}),Object(j.jsx)("button",{onClick:function(e){return l(!i)},children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fcomment.svg?v=1614382900046",alt:"Comment Action"})})]}),Object(j.jsxs)("section",{className:f.a.activity,children:[Object(j.jsxs)("div",{className:f.a.likes,children:[e.likes.count," likes"]}),Object(j.jsxs)("div",{className:f.a.comments,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)(m.b,{to:"/profile/".concat(e.post.userId),children:e.post.userId},"/profile/".concat(e.post.userId))}),Object(j.jsx)("span",{children:e.post.desc})]}),e.comments.map((function(e,t){return Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)(m.b,{to:"/profile/".concat(e.userId),children:e.userId},"/profile/".concat(e.userId))}),Object(j.jsx)("span",{children:e.text})]},t)}))]}),Object(j.jsxs)("time",{className:f.a.time,children:[O(e.post.datetime).toUpperCase()," AGO"]}),i&&Object(j.jsxs)("form",{className:f.a.addComment,onSubmit:function(t){e.onComment(e.post.id,c),a(""),l(!1),t.preventDefault()},children:[Object(j.jsx)("input",{type:"text",placeholder:"Add a comment\u2026",value:c,onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("button",{type:"submit",children:"Post"})]})]})]})},x=n(8);n(54);var g=n(26);n(56);g.a.initializeApp({apiKey:"AIzaSyANwlsHVCs9CZB_qWdUUERTKHdXLmeSIe4",authDomain:"social-c6e6f.firebaseapp.com",projectId:"social-c6e6f",storageBucket:"social-c6e6f.appspot.com",messagingSenderId:"16396311387",appId:"1:16396311387:web:31e89fbf89adb2a66fd87e"});var _=g.a.firestore();g.a.auth();var N=Object(s.createContext)(),w=function(e){var t=Object(s.useState)(null),n=Object(b.a)(t,2),c=(n[0],n[1],Object(s.useState)([])),a=Object(b.a)(c,2),r=(a[0],a[1]),o=Object(s.useState)([]),i=Object(b.a)(o,2),l=(i[0],i[1]),d=Object(s.useState)([]),u=Object(b.a)(d,2),h=(u[0],u[1]),f=Object(s.useState)([]),O=Object(b.a)(f,2),p=O[0],m=O[1],v=Object(s.useState)([]),x=Object(b.a)(v,2),g=(x[0],x[1]);return Object(s.useEffect)((function(){_.collection("users").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));r(t)})),_.collection("posts").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));l(t)})),_.collection("likes").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));h(t)})),_.collection("followers").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));m(t)})),_.collection("comments").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));g(t)}))}),[]),Object(j.jsx)(N.Provider,{value:function(e,t){m(p.filter((function(n){return!(n.userId===e&&n.followerId===t)}))),_.collection("followers").where("userId","==",e).where("followerId","==",t).get().then((function(e){return e.forEach((function(e){return e.ref.delete()}))}))},children:e.children})};var P=function(e){var t=Object(x.g)().postId,n=Object(s.useContext)(N),c=n.posts,a=n.users,r=n.comments,o=n.likes,i=n.currentUserId,l=n.addComment,d=n.addLike,u=n.removeLike;function b(e){return a.find((function(t){return t.id===e.userId}))}function h(e){return r.filter((function(t){return t.postId===e.id}))}function f(e){var t=o.filter((function(t){return t.postId===e.id}));return{self:t.some((function(e){return e.userId===i})),count:t.length}}return Object(j.jsx)("div",{children:c.sort((function(e,t){return new Date(t.datetime)-new Date(e.datetime)})).filter((function(e){return void 0===t||e.id===t})).map((function(e){return Object(j.jsx)(v,{user:b(e),post:e,comments:h(e),likes:f(e),onComment:l,onLike:d,onUnlike:u},e.id)}))})};var D=function(){return Object(j.jsx)("h2",{children:"Explore"})},I=n(19),k=n.n(I),y=n(39),C=n(40),S=n(21),L=n(42),A=n(41),E=function(e){Object(L.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(y.a)(this,n),(s=t.call(this,e)).handleDragEnter=s.handleDragEnter.bind(Object(S.a)(s)),s.handleDrop=s.handleDrop.bind(Object(S.a)(s)),s.handleDragOver=s.handleDragOver.bind(Object(S.a)(s)),s.handleDragLeave=s.handleDragLeave.bind(Object(S.a)(s)),s}return Object(C.a)(n,[{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDrop&&this.props.onDrop(e)}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.dragTargetSaved=e.target,this.props.onDragEnter&&this.props.onDragEnter(e)}},{key:"handleDragOver",value:function(e){!1!==e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),this.props.onDragOver&&this.props.onDragOver(e))}},{key:"handleDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDragLeave&&this.dragTargetSaved===e.target&&this.props.onDragLeave(e)}},{key:"render",value:function(){var e=c.a.Children.only(this.props.children);return c.a.cloneElement(e,{onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop})}}]),n}(s.PureComponent);var F=function(e){var t=Object(s.useContext)(N).addPost,n=Object(s.useState)(!1),c=Object(b.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),i=Object(b.a)(o,2),l=i[0],d=i[1],u=Object(s.useState)(null),h=Object(b.a)(u,2),f=h[0],O=h[1],p=Object(s.useState)(""),m=Object(b.a)(p,2),v=m[0],g=m[1],_=Object(x.f)();return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:k.a.photo,children:[f?Object(j.jsx)("img",{src:f,alt:"New Post"}):Object(j.jsx)("div",{className:k.a.message,children:"Drop your image"}),Object(j.jsx)(E,{onDragEnter:function(e){r(!0)},onDragLeave:function(e){r(!1)},onDrop:function(e){if(!1!==e.dataTransfer.types.includes("Files")){if(e.dataTransfer.files.length>=1){var t=e.dataTransfer.files[0];if(t.size>1e6)return;if(t.type.match(/image.*/)){var n=new FileReader;n.onloadend=function(e){O(e.target.result)},n.readAsDataURL(t)}}r(!1)}},children:Object(j.jsx)("div",{className:[k.a.dropArea,a?k.a.dragging:null].join(" ")})})]}),Object(j.jsx)("div",{className:k.a.desc,children:Object(j.jsx)("textarea",{placeholder:"Describe...",rows:"2",value:l,onChange:function(e){d(e.target.desc)}})}),Object(j.jsx)("div",{className:k.a.error,children:v}),Object(j.jsxs)("div",{className:k.a.actions,children:[Object(j.jsx)("button",{onClick:function(){e.onPostCancel(),_.goBack()},children:"Cancel"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),null!==f?(t(f,l),g(""),_.push("/")):g("You need to add a photo!")},children:"Share"})]})]})};var B=function(){return Object(j.jsx)("h2",{children:"Activity"})},U=n(17),T=n.n(U),M=n(25),q=n.n(M);var Q=function(e){return Object(j.jsx)("div",{className:q.a.square,children:Object(j.jsx)("div",{className:q.a.content,children:Object(j.jsx)("img",{className:q.a.image,src:p(e.post.photo),alt:"Post Thumbnail"})})})};var W=function(e){var t,n=Object(s.useContext)(N),c=n.posts,a=n.users,r=n.followers,o=n.currentUserId,i=n.addFollower,l=n.removeFollower,d=Object(x.g)(),u=void 0===d.userId?o:d.userId,b=a.find((function(e){return e.id===u})),h=c.filter((function(e){return e.userId===u})),f=r.filter((function(e){return e.userId===u})),O=r.filter((function(e){return e.followerId===u}));return t=void 0!==r.find((function(e){return e.userId===u&&e.followerId===o}))?Object(j.jsx)("button",{onClick:function(){l(u,o)},className:T.a.unfollowBtn,children:"Unfollow"}):Object(j.jsx)("button",{onClick:function(){i(u,o)},className:T.a.followBtn,children:"Follow"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("header",{className:T.a.header,children:[Object(j.jsx)("div",{className:T.a.photo,children:Object(j.jsx)("img",{src:b.photo,alt:"Profile"})}),Object(j.jsx)("div",{className:T.a.id,children:Object(j.jsx)("span",{children:u})}),Object(j.jsx)("div",{classname:T.a.button,children:t})]}),Object(j.jsxs)("div",{className:T.a.user,children:[Object(j.jsx)("div",{className:T.a.name,children:b.name}),Object(j.jsx)("div",{className:T.a.bio,children:b.bio})]}),Object(j.jsxs)("ul",{className:T.a.activity,children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:h.length}),Object(j.jsx)("br",{}),"posts"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:f.length}),Object(j.jsx)("br",{}),"followers"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:O.length}),Object(j.jsx)("br",{}),"following"]})]}),Object(j.jsx)("div",{className:T.a.posts,children:h.map((function(e){return Object(j.jsx)(m.b,{to:"/".concat(e.id),children:Object(j.jsx)(Q,{post:e})},e.id)}))})]})},Y=n(22),z=n.n(Y);var H=function(e){return Object(j.jsxs)("nav",{className:z.a.navbar,children:[Object(j.jsx)("div",{className:z.a.navItem,children:Object(j.jsx)(m.b,{to:"/",children:Object(j.jsx)("img",{src:p("/assets/home.svg"),alt:"Home"})})}),Object(j.jsx)("div",{className:z.a.navItem,children:Object(j.jsx)(m.b,{to:"/explore",children:Object(j.jsx)("img",{src:p("/assets/explore.svg"),alt:"Explore"})})}),Object(j.jsx)("div",{className:z.a.navItem,children:Object(j.jsx)(m.b,{to:"/newpost",children:Object(j.jsx)("img",{src:p("/assets/newpost.svg"),alt:"NewPost"})})}),Object(j.jsx)("div",{className:z.a.navItem,children:Object(j.jsx)(m.b,{to:"/activity",children:Object(j.jsx)("img",{src:p("/assets/activity.svg"),alt:"Activity"})})}),Object(j.jsx)("div",{className:z.a.navItem,children:Object(j.jsx)(m.b,{to:"/profile",children:Object(j.jsx)("img",{src:p("/assets/profile.svg"),alt:"Profile"})})})]})};var R=function(){return Object(j.jsx)(m.a,{basename:"/Social",children:Object(j.jsx)(w,{children:Object(j.jsx)("div",{className:i.a.container,children:Object(j.jsxs)("div",{className:i.a.content,children:[Object(j.jsx)(u,{}),Object(j.jsxs)(x.c,{children:[Object(j.jsx)(x.a,{path:"/explore",children:Object(j.jsx)(D,{})}),Object(j.jsx)(x.a,{path:"/activity",children:Object(j.jsx)(B,{})}),Object(j.jsx)(x.a,{path:"/newpost",children:Object(j.jsx)(F,{})}),Object(j.jsx)(x.a,{path:"/profile/:userId?",children:Object(j.jsx)(W,{})}),Object(j.jsx)(x.a,{path:"/:postId?",children:Object(j.jsx)(P,{})})]}),Object(j.jsx)(H,{})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(j.jsx)(R,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.9da94726.chunk.js.map