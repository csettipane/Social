(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[0],{16:function(e,t,n){e.exports={post:"Post_post__k-M1c",header:"Post_header__3AX5r",user:"Post_user__2QsRD",content:"Post_content__37Op3",imgContainer:"Post_imgContainer__2pU2y",actions:"Post_actions__3NQsO",activity:"Post_activity__3NN-q",likes:"Post_likes__49vLf",time:"Post_time__M-QSi",comments:"Post_comments__2tLLM",addComment:"Post_addComment__3uswk"}},17:function(e,t,n){e.exports={header:"Profile_header__1714E",photo:"Profile_photo__Wnbjm",id:"Profile_id__2_pIX",user:"Profile_user__2VT9G",name:"Profile_name__2whgl",activity:"Profile_activity__iZABj",posts:"Profile_posts__u1_2F",followBtn:"Profile_followBtn__3y941",unfollowBtn:"Profile_unfollowBtn__1qmb7"}},19:function(e,t,n){e.exports={photo:"NewPost_photo__2oIUI",dropArea:"NewPost_dropArea__2L5wS",dragging:"NewPost_dragging__2FG7i",message:"NewPost_message__3pSJ4",image:"NewPost_image__3OeO2",desc:"NewPost_desc__3MQNB",actions:"NewPost_actions__mzfm8",error:"NewPost_error__2Y1jN"}},22:function(e,t,n){e.exports={navbar:"Navbar_navbar__2wlKY",navItem:"Navbar_navItem__2NzOj"}},25:function(e,t,n){e.exports={square:"PostThumbnail_square__12VQt",content:"PostThumbnail_content__OFWk7",image:"PostThumbnail_image__2kuQY"}},28:function(e,t,n){e.exports={container:"App_container__3CZYa",content:"App_content__2-hcV"}},36:function(e,t,n){e.exports={header:"Header_header__28L8Y"}},46:function(e,t,n){},47:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var s=n(3),c=n.n(s),a=n(35),r=n.n(a),o=(n(46),n(47),n(28)),i=n.n(o),l=n(36),d=n.n(l),j=n(2);var u=function(){return Object(j.jsxs)("header",{className:d.a.header,children:[Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fcamera.svg?v=1614382899995",alt:"camera"})})}),Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Flogo.png?v=1614382900226",alt:"logo"})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fmessage.svg?v=1614382900322",alt:"message"})})})]})},b=n(12),h=n(16),f=n.n(h),m=function(e){var t=Math.floor((new Date-new Date(e))/1e3),n=Math.floor(t/31556926);return n>=1?n+" years":(n=Math.floor(t/2592e3))>=1?n+" months":(n=Math.floor(t/86400))>=1?n+" days":(n=Math.floor(t/3600))>=1?n+" hours":(n=Math.floor(t/60))>=1?n+" minutes":Math.floor(t)+" seconds"};function O(e){return e.startsWith("/")?"/Social"+e:e}var p=n(11);var v=function(e){var t=Object(s.useState)(""),n=Object(b.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!1),o=Object(b.a)(r,2),i=o[0],l=o[1];return Object(j.jsxs)("article",{className:f.a.post,children:[Object(j.jsx)("header",{className:f.a.header,children:Object(j.jsxs)("button",{className:f.a.user,to:"/profile/".concat(e.user.id),children:[Object(j.jsx)("img",{src:O(e.user.photo),alt:"User Profile"}),Object(j.jsxs)("span",{children:[Object(j.jsx)(p.b,{to:"/profile/".concat(e.user.id),children:e.user.id},"/profile/".concat(e.user.id))," "]})]})}),Object(j.jsx)("section",{className:f.a.content,children:Object(j.jsx)("div",{className:f.a.imgContainer,children:Object(j.jsx)("img",{src:O(e.post.photo),alt:"Post"})})}),Object(j.jsxs)("section",{className:f.a.actions,children:[Object(j.jsx)("button",{children:e.likes.self?Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Funlike.svg?v=1614382900439",alt:"Unlike Action",onClick:function(){e.onUnlike(e.post.id)}}):Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Flike.svg?v=1614382900207",alt:"Like Action",onClick:function(){e.onLike(e.post.id)}})}),Object(j.jsx)("button",{onClick:function(e){return l(!i)},children:Object(j.jsx)("img",{src:"https://cdn.glitch.com/f70d577d-f905-45ee-bb92-042bfa767970%2Fcomment.svg?v=1614382900046",alt:"Comment Action"})})]}),Object(j.jsxs)("section",{className:f.a.activity,children:[Object(j.jsxs)("div",{className:f.a.likes,children:[e.likes.count," likes"]}),Object(j.jsxs)("div",{className:f.a.comments,children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)(p.b,{to:"/profile/".concat(e.post.userId),children:e.post.userId},"/profile/".concat(e.post.userId))}),Object(j.jsx)("span",{children:e.post.desc})]}),e.comments.map((function(e,t){return Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:Object(j.jsx)(p.b,{to:"/profile/".concat(e.userId),children:e.userId},"/profile/".concat(e.userId))}),Object(j.jsx)("span",{children:e.text})]},t)}))]}),Object(j.jsxs)("time",{className:f.a.time,children:[m(e.post.datetime).toUpperCase()," AGO"]}),i&&Object(j.jsxs)("form",{className:f.a.addComment,onSubmit:function(t){e.onComment(e.post.id,c),a(""),l(!1),t.preventDefault()},children:[Object(j.jsx)("input",{type:"text",placeholder:"Add a comment\u2026",value:c,onChange:function(e){return a(e.target.value)}}),Object(j.jsx)("button",{type:"submit",children:"Post"})]})]})]})},x=n(8);var g=function(e){var t=(new Date).valueOf().toString(36);return function(e){for(var t=(new Date).getTime(),n=0;n<1e7&&!((new Date).getTime()-t>e);n++);}(1),e?e+t:t},_=n(31);n(55);_.a.initializeApp({apiKey:"...",authDomain:"...",databaseURL:"...",projectId:"...",storageBucket:"...",messagingSenderId:"...",appId:"..."});var w=_.a.firestore(),N=Object(s.createContext)();var I=function(e){var t=Object(s.useState)(null),n=Object(b.a)(t,2),c=n[0],a=(n[1],Object(s.useState)([])),r=Object(b.a)(a,2),o=r[0],i=r[1],l=Object(s.useState)([]),d=Object(b.a)(l,2),u=d[0],h=d[1],f=Object(s.useState)([]),m=Object(b.a)(f,2),O=m[0],p=m[1],v=Object(s.useState)([]),x=Object(b.a)(v,2),_=x[0],I=x[1],D=Object(s.useState)([]),P=Object(b.a)(D,2),k=P[0],y=P[1];return Object(s.useEffect)((function(){w.collection("users").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));i(t)})),w.collection("posts").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));h(t)})),w.collection("likes").get().then((function(e){e.docs.map((function(e){return e.data()}))})),w.collection("followers").get().then((function(e){e.docs.map((function(e){return e.data()}))})),w.collection("comments").get().then((function(e){e.docs.map((function(e){return e.data()}))}))}),[]),Object(j.jsx)(N.Provider,{value:{users:o,posts:u,likes:O,followers:_,comments:k,addComment:function(e,t){var n={userId:c,postId:e,text:t,datetime:(new Date).toISOString()};y(k.concat(n)),w.collection("comments").add(n)},addLike:function(e){var t={userId:c,postId:e,datetime:(new Date).toISOString()};p(O.concat(t)),w.collection("likes").add(t)},removeLike:function(e){p(O.filter((function(t){return!(t.userId===c&&t.postId===e)}))),w.collection("likes").where("userId","==",c).where("postId","==",e).get().then((function(e){return e.forEach((function(e){return e.ref.delete()}))}))},addPost:function(e,t){var n={id:g("post"),userId:c,photo:e,desc:t,datetime:(new Date).toISOString()};h(u.concat(n)),w.collection("posts").add(n)},addFollower:function(e,t){var n={userId:e,followerId:t};I(_.concat(n)),w.collection("followers").add(n)},removeFollower:function(e,t){I(_.filter((function(n){return!(n.userId===e&&n.followerId===t)}))),w.collection("followers").where("userId","==",e).where("followerId","==",t).get().then((function(e){return e.forEach((function(e){return e.ref.delete()}))}))}},children:e.children})};var D=function(e){var t=Object(x.g)().postId,n=Object(s.useContext)(N),c=n.posts,a=n.users,r=n.comments,o=n.likes,i=n.currentUserId,l=n.addComment,d=n.addLike,u=n.removeLike;function b(e){return a.find((function(t){return t.id===e.userId}))}function h(e){return r.filter((function(t){return t.postId===e.id}))}function f(e){var t=o.filter((function(t){return t.postId===e.id}));return{self:t.some((function(e){return e.userId===i})),count:t.length}}return Object(j.jsx)("div",{children:c.sort((function(e,t){return new Date(t.datetime)-new Date(e.datetime)})).filter((function(e){return void 0===t||e.id===t})).map((function(e){return Object(j.jsx)(v,{user:b(e),post:e,comments:h(e),likes:f(e),onComment:l,onLike:d,onUnlike:u},e.id)}))})};var P=function(){return Object(j.jsx)("h2",{children:"Explore"})},k=n(19),y=n.n(k),C=n(38),S=n(39),L=n(21),F=n(41),A=n(40),E=function(e){Object(F.a)(n,e);var t=Object(A.a)(n);function n(e){var s;return Object(C.a)(this,n),(s=t.call(this,e)).handleDragEnter=s.handleDragEnter.bind(Object(L.a)(s)),s.handleDrop=s.handleDrop.bind(Object(L.a)(s)),s.handleDragOver=s.handleDragOver.bind(Object(L.a)(s)),s.handleDragLeave=s.handleDragLeave.bind(Object(L.a)(s)),s}return Object(S.a)(n,[{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDrop&&this.props.onDrop(e)}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.dragTargetSaved=e.target,this.props.onDragEnter&&this.props.onDragEnter(e)}},{key:"handleDragOver",value:function(e){!1!==e.dataTransfer.types.includes("Files")&&(e.preventDefault(),e.stopPropagation(),this.props.onDragOver&&this.props.onDragOver(e))}},{key:"handleDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onDragLeave&&this.dragTargetSaved===e.target&&this.props.onDragLeave(e)}},{key:"render",value:function(){var e=c.a.Children.only(this.props.children);return c.a.cloneElement(e,{onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop})}}]),n}(s.PureComponent);var T=function(e){var t=Object(s.useContext)(N).addPost,n=Object(s.useState)(!1),c=Object(b.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(""),i=Object(b.a)(o,2),l=i[0],d=i[1],u=Object(s.useState)(null),h=Object(b.a)(u,2),f=h[0],m=h[1],O=Object(s.useState)(""),p=Object(b.a)(O,2),v=p[0],g=p[1],_=Object(x.f)();return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:y.a.photo,children:[f?Object(j.jsx)("img",{src:f,alt:"New Post"}):Object(j.jsx)("div",{className:y.a.message,children:"Drop your image"}),Object(j.jsx)(E,{onDragEnter:function(e){r(!0)},onDragLeave:function(e){r(!1)},onDrop:function(e){if(!1!==e.dataTransfer.types.includes("Files")){if(e.dataTransfer.files.length>=1){var t=e.dataTransfer.files[0];if(t.size>1e6)return;if(t.type.match(/image.*/)){var n=new FileReader;n.onloadend=function(e){m(e.target.result)},n.readAsDataURL(t)}}r(!1)}},children:Object(j.jsx)("div",{className:[y.a.dropArea,a?y.a.dragging:null].join(" ")})})]}),Object(j.jsx)("div",{className:y.a.desc,children:Object(j.jsx)("textarea",{placeholder:"Describe...",rows:"2",value:l,onChange:function(e){d(e.target.desc)}})}),Object(j.jsx)("div",{className:y.a.error,children:v}),Object(j.jsxs)("div",{className:y.a.actions,children:[Object(j.jsx)("button",{onClick:function(){e.onPostCancel(),_.goBack()},children:"Cancel"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),null!==f?(t(f,l),g(""),_.push("/")):g("You need to add a photo!")},children:"Share"})]})]})};var B=function(){return Object(j.jsx)("h2",{children:"Activity"})},U=n(17),M=n.n(U),Q=n(25),Y=n.n(Q);var q=function(e){return Object(j.jsx)("div",{className:Y.a.square,children:Object(j.jsx)("div",{className:Y.a.content,children:Object(j.jsx)("img",{className:Y.a.image,src:O(e.post.photo),alt:"Post Thumbnail"})})})};var W=function(e){var t,n=Object(s.useContext)(N),c=n.posts,a=n.users,r=n.followers,o=n.currentUserId,i=n.addFollower,l=n.removeFollower,d=Object(x.g)(),u=void 0===d.userId?o:d.userId,b=a.find((function(e){return e.id===u})),h=c.filter((function(e){return e.userId===u})),f=r.filter((function(e){return e.userId===u})),m=r.filter((function(e){return e.followerId===u}));return t=void 0!==r.find((function(e){return e.userId===u&&e.followerId===o}))?Object(j.jsx)("button",{onClick:function(){l(u,o)},className:M.a.unfollowBtn,children:"Unfollow"}):Object(j.jsx)("button",{onClick:function(){i(u,o)},className:M.a.followBtn,children:"Follow"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("header",{className:M.a.header,children:[Object(j.jsx)("div",{className:M.a.photo,children:Object(j.jsx)("img",{src:b.photo,alt:"Profile"})}),Object(j.jsx)("div",{className:M.a.id,children:Object(j.jsx)("span",{children:u})}),Object(j.jsx)("div",{classname:M.a.button,children:t})]}),Object(j.jsxs)("div",{className:M.a.user,children:[Object(j.jsx)("div",{className:M.a.name,children:b.name}),Object(j.jsx)("div",{className:M.a.bio,children:b.bio})]}),Object(j.jsxs)("ul",{className:M.a.activity,children:[Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:h.length}),Object(j.jsx)("br",{}),"posts"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:f.length}),Object(j.jsx)("br",{}),"followers"]}),Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:m.length}),Object(j.jsx)("br",{}),"following"]})]}),Object(j.jsx)("div",{className:M.a.posts,children:h.map((function(e){return Object(j.jsx)(p.b,{to:"/".concat(e.id),children:Object(j.jsx)(q,{post:e})},e.id)}))})]})},z=n(22),R=n.n(z);var G=function(e){return Object(j.jsxs)("nav",{className:R.a.navbar,children:[Object(j.jsx)("div",{className:R.a.navItem,children:Object(j.jsx)(p.b,{to:"/",children:Object(j.jsx)("img",{src:O("/assets/home.svg"),alt:"Home"})})}),Object(j.jsx)("div",{className:R.a.navItem,children:Object(j.jsx)(p.b,{to:"/explore",children:Object(j.jsx)("img",{src:O("/assets/explore.svg"),alt:"Explore"})})}),Object(j.jsx)("div",{className:R.a.navItem,children:Object(j.jsx)(p.b,{to:"/newpost",children:Object(j.jsx)("img",{src:O("/assets/newpost.svg"),alt:"NewPost"})})}),Object(j.jsx)("div",{className:R.a.navItem,children:Object(j.jsx)(p.b,{to:"/activity",children:Object(j.jsx)("img",{src:O("/assets/activity.svg"),alt:"Activity"})})}),Object(j.jsx)("div",{className:R.a.navItem,children:Object(j.jsx)(p.b,{to:"/profile",children:Object(j.jsx)("img",{src:O("/assets/profile.svg"),alt:"Profile"})})})]})};var J=function(){return Object(j.jsx)(p.a,{basename:"/Social",children:Object(j.jsx)(I,{children:Object(j.jsx)("div",{className:i.a.container,children:Object(j.jsxs)("div",{className:i.a.content,children:[Object(j.jsx)(u,{}),Object(j.jsxs)(x.c,{children:[Object(j.jsx)(x.a,{path:"/explore",children:Object(j.jsx)(P,{})}),Object(j.jsx)(x.a,{path:"/activity",children:Object(j.jsx)(B,{})}),Object(j.jsx)(x.a,{path:"/newpost",children:Object(j.jsx)(T,{})}),Object(j.jsx)(x.a,{path:"/profile/:userId?",children:Object(j.jsx)(W,{})}),Object(j.jsx)(x.a,{path:"/:postId?",children:Object(j.jsx)(D,{})})]}),Object(j.jsx)(G,{})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(j.jsx)(J,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.0e69198f.chunk.js.map